## Foodgram: https://kittygram.bounceme.net

«Фудграм» — сайт, на котором пользователи будут публиковать свои рецепты, добавлять чужие рецепты в избранное и подписываться на публикации других авторов. Зарегистрированным пользователям также будет доступен сервис «Список покупок». Он позволит создавать список продуктов, которые нужно купить для приготовления выбранных блюд.

### Технологии:

Python, Django, Django Rest Framework, Docker, Docker Compose, Gunicorn, NGINX, PostgreSQL

По адресу http://localhost изучите фронтенд веб-приложения, а по адресу http://localhost/api/docs/ — спецификацию API.

### Как запустить проект:
Клонировать репозиторий и перейти в него в командной строке:

```sh
git clone https://github.com/Mikhail0-O/foodgram.git

cd foodgram
```

Установить на сервер Docker, Docker Compose:

```sh
sudo apt update
sudo apt install curl
curl -fSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
sudo apt install docker-compose-plugin
```
Скопировать файл docker-compose.production.yml, nginx.conf из папки infra

```sh
Для работы с GitHub Actions необходимо создать секреты:
DOCKER_PASSWORD='пароль от Docker Hub'
DOCKER_USERNAME='логин от Docker Hub'
SECRET_KEY='секретный ключ Django проекта'
HOST='IP-адрес вашего сервера'
USER='имя пользователя на сервере'
PASSPHRASE='пароль от ssh-ключа'
SSH_KEY='ssh-ключ'
TELEGRAM_TO='ID телеграм-аккаунта для посылки сообщения'
TELEGRAM_TOKEN='токен бота'

POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
```

После того как запушатся изменения на GitHub в ветку main, запустятся тесты, подтянуться образы с Docker Hub, соберутся контейнеры, выполнится деплой на сервер и придет сообщение в чат от бота об успешно выполненном деплое.

Создать суперпользователя:

sudo docker compose exec backend python manage.py createsuperuser

## API Foodgram

Все сервисы и страницы проекта должны быть доступны для пользователей в соответствии с их правами.
Для авторизованных пользователей:
Доступна главная страница.
Доступна страница другого пользователя.
Доступна страница отдельного рецепта.
Доступна страница «Мои подписки»:
можно подписаться и отписаться на странице рецепта;
можно подписаться и отписаться на странице автора;
при подписке рецепты автора добавляются на страницу «Мои подписки» и удаляются оттуда при отказе от подписки.
Доступна страница «Избранное»:
на странице рецепта есть возможность добавить рецепт в список избранного и удалить его оттуда;
на любой странице со списком рецептов есть возможность добавить рецепт в список избранного и удалить его оттуда.
Доступна страница «Список покупок»:
на странице рецепта есть возможность добавить рецепт в список покупок и удалить его оттуда;
на любой странице со списком рецептов есть возможность добавить рецепт в список покупок и удалить его оттуда;
есть возможность выгрузить файл с перечнем и количеством необходимых ингредиентов для рецептов из «Списка покупок»;
ингредиенты в выгружаемом списке не повторяются, корректно подсчитывается общее количество для каждого ингредиента.
Доступна страница «Создать рецепт»:
есть возможность опубликовать свой рецепт;
есть возможность отредактировать и сохранить изменения в своём рецепте;
есть возможность удалить свой рецепт.
Доступна возможность изменить пароль.
Доступна возможность изменить/удалить изображение профиля.
Доступна возможность выйти из системы.
Для неавторизованных пользователей:
Доступна главная страница.
Доступна страница отдельного рецепта.
Доступна страница любого пользователя.
Доступна и работает форма входа.
Доступна и работает форма регистрации.
Администратор и админ-зона:
Все модели выведены в админ-зону.
Для модели пользователей доступен поиск по имени и адресу электронной почты.
Для модели рецептов включен поиск по названию, автору и фильтрация по тегам.
На админ-странице рецепта отображается общее число добавлений этого рецепта в избранное.
Для модели ингредиентов работает поиск по названию.

### Регистрация пользователей на эндпоинт:

```POST /api/users/```

```sh
{
    "email": "vivanov@yandex.ru",
    "username": "vasya.ivanov",
    "first_name": "Вася",
    "last_name": "Иванов",
    "password": "MySecretPas$word"
}
```
### Получение токена по энпоинту:

```POST /api/auth/token/login/ ```

```sh
{
    "email": "Mikha@mail.ru",
    "password": "qwerty"
}

```
### Сооздание рецепта по энпоинту:

```POST /api/recipes/```

```sh
{
    "ingredients": [
        {
            "id": 1,
            "amount": 10
        },
        {
            "id": 2,
            "amount": 20
        }
    ],
    "tags": [
        1,
        2
    ],
    "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAgMAAABieywaAAAACVBMVEUAAAD///9fX1/S0ecCAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNoAAAAggCByxOyYQAAAABJRU5ErkJggg==",
    "name": "Нечто съедобное (это не точно)",
    "text": "Приготовьте как нибудь эти ингредиеты",
    "cooking_time": 5
}
```


### Автор проекта: Михаил Жуков Mikhail0-O, e-mail: M-kh-l.i-ai-O@yandex.ru